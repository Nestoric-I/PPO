**Дата:** 26.12.2023 г.

**Статус:** Принято

**Контекст:** 

При разработке СДО, нам придется реализовывать регистрацию, авторизацию и аутентификацию пользователей. Для этого необходимо выбрать протокол аутентификации и авторизации

**Рассмотренные варианты:**

1. **Аутентификация по паролю (Basic):**  схема, при которой username и password пользователя передаются в заголовке Authorization в незашифрованном виде (base64-encoded). 
2. **Аутентификация по ключам доступа (Api key):** сервер генерирует ключи доступа по запросу пользователей, которые далее сохраняют эти ключи в клиентских приложениях. При создании ключа также возможно ограничить срок действия и уровень доступа.
3. **Аутентификация по токенам (JWT)**:  JSON Web Token - это открытый стандарт для создания токенов доступа, основанный на формате JSON. Обычно он используется для передачи данных для аутентификации пользователей в клиент-серверных приложениях. Токены создаются сервером, подписываются секретным ключом и передаются юзеру, который в дальнейшем использует их для подтверждения своей личности.

**Решение:**

Аутентификация по токенам (JWT)

**Обоснование:**

- **Безопасность:** Токены являются уникальными кодами, которые сложно подделать или украсть. Это значительно повышает безопасность аутентификации пользователей и защищает от возможных атак.
- **Безсессионность:** Токены не требуют хранения состояния сессии на сервере, что позволяет легко масштабировать систему и не зависеть от состояния сервера.
- **Удобство:** Токены позволяют пользователям оставаться авторизованными без необходимости постоянно вводить учетные данные, что делает процесс работы с приложением более удобным и интуитивно понятным.
- **Гибкость:** Авторизация по токену позволяет использовать различные алгоритмы шифрования и обеспечивает гибкость в выборе методов аутентификации и авторизации.


**Недостатки решения:**

- **Сложная реализация отзыва токена**
- **Криптоалгоритм может быть объявлен устаревшим:** JWT полностью полагается на алгоритм подписи. Сейчас, хотя это и нечасто, но в прошлом многие алгоритмы шифрования / подписи устарели.
- **Накладные расходы на данные:** Размер токена JWT будет больше, чем у обычного токена сеанса. Чем больше данных вы добавляете в токен JWT, тем длиннее он становится линейно.
-
**Последствия:**

- Используем jwt токен для авторизации
- Запросы отправляемые на сервер будут иметь большой размер из-за того, что в каждом запросе будет заголовок с массивным токеном
